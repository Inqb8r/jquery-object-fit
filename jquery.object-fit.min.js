// jquery.object-fit.js
// ====================
//
// Originally by Simon Schmid https://github.com/schmidsi
// Re-worked by Steve Workman https://github.com/steveworkman
// Polyfill for Object-fit property in CSS3 Images http://www.w3.org/TR/2012/CR-css3-images-20120417/#object-fit
//
// usage:
// ------
// ```
// $('.selector').objectFit({type: 'contain', hideOverflow: true});
// ```
//
// implemented types:
// 'contain' (default)
// 'cover'
(function(e,t,n){var r,i=[],s=function(){var e=n.createElement("modernizr").style,t="objectFit",r="Webkit Moz O ms",i=r.split(" "),s=t.charAt(0).toUpperCase()+t.slice(1),o=(t+" "+i.join(s+" ")+s).split(" ");for(var u in o){var t=o[u];if(!!~(""+t).indexOf("-")&&e[t]!==undefined)return prefixed=="pfx"?t:!0}return!1},o=function(t){var t=t||"contain",n=s();return this.each(function(){n?e(this).css("object-fit",t):u(this,t)})},u=function(t,n){function o(e){var t=e.parent(),n=t.css("display");return n=="block"||n=="-webkit-box"&&t.width()>0?{obj:t,width:t.width(),height:t.height(),ratio:t.width()/t.height()}:o(t)}var r=typeof n=="string"?n:n.type,s=n.hideOverflow===undefined?!0:n.hideOverflow;console.log(s),i.push({elem:t,params:{type:r,hideOverflow:s}});var u=e(t),a=u.data("ratio"),f=o(u),l,c;e("<img/>").attr("src",u.attr("src")).load(function(){l=this.width,c=this.height,a===undefined&&(a=l/c,u.data("ratio",a));if(r==="contain")f.ratio>a?u.width(f.height*a):u.height(f.width/a).width("100%");else if(r==="cover"){if(f.width>l||f.height>c)f.ratio>a?u.width(f.width).height(f.height*a):u.height(f.height).width(f.width*a);s&&f.obj.css("overflow","hidden")}})};e.fn.objectFit=o,e(t).resize(function(){clearTimeout(r);for(var e=0,t=i.length;e<t;e++){var n=i[e];r=setTimeout(u(n.elem,n.params),100)}})})(jQuery,window,document);